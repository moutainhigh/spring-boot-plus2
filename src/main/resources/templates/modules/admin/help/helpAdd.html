<!DOCTYPE html>
<html xmlns:th="http://www.springframework.org/schema/jdbc">
<head>
    <meta charset="utf-8">
    <title>兮家手册--添加</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="/components/layuiadmin/layui/src/css/layui.css">
    <link rel="stylesheet" href="/components/easyeditor/css/easyeditor.css">
    <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_1531710_xb357ub1wmg.css"/>
    <script src="/components/layuiadmin/layui/src/layui.js"></script>
    <script src="/components/easyeditor/js/marked.min.js" type="text/javascript" charset="utf-8"></script>
    <script src='/base/js/jquery-3.4.1.min.js'></script>
    <script src="/base/js/app.js"></script>
</head>
<body>
<!-- 置前 -->
<!--<div class="layui-form" lay-filter="layuiadmin-app-form-list" id="layuiadmin-app-form-list" style="position:fixed; z-index:999;display: block;  top:1%; left:1%; text-decoration: none;">-->
<div class="layui-form" lay-filter="layuiadmin-app-form-list" id="layuiadmin-app-form-list" style="padding: 20px 30px 0 0;">
    <div class="layui-form-item">
        <label class="layui-form-label">标题：</label>
        <div class="layui-input-inline" style="width: 35%">
            <input type="text" id="title" name="title" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
        </div>
        <div class="layui-input-inline" style="width: 160px">
            <select id="category" name="category" lay-verify="" lay-filter="required"> </select>
        </div>
        <div class="layui-input-inline" style="width: 160px">
            <select id="helpVersion" name="helpVersion" lay-verify="" lay-filter="required"></select>
        </div>
        </select>
        <label class="layui-form-label">排序：</label>
        <div class="layui-input-inline" style="width: 160px">
            <input type="text" id="sort" name="sort" lay-verify="required" value="0" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item layui-hide">
        <input type="button" lay-submit lay-filter="layuiadmin-app-form-submit" id="layuiadmin-app-form-submit" value="确认添加">
        <input type="button" lay-submit lay-filter="layuiadmin-app-form-edit" id="layuiadmin-app-form-edit" value="确认编辑">
    </div>
</div>
<!-- Markdown编辑器元素 -->
<textarea id="L_content" name="content" placeholder="请输入发表内容" class="layui-textarea editor"></textarea>


<script>
    layui.use(['form'], function () {
        layui.config({
            base: '/components/easyeditor/mods/' //存放layui拓展模块的目录位置
        }).extend({
            easyeditor: 'easyeditor'
        }).use(['easyeditor', 'form'], function () {
            let easyeditor = layui.easyeditor;
            //初始化Markdown编辑器
            easyeditor.init({
                elem: '.editor' //textarea 元素class
                , uploadUrl: '/upload' //图片上传地址
                , uploadSize: ''  // 限制的上传大小 单位kb 默认 1024k
                , style: 'fangge'// 内置样式  目前只有默认 和 方格两种
                //,codeStyle:'layuiCode' // 代码风格 layuiCode风格 与 默认风格
                // ,codeSkin:'notepad'    // 代码框样式 默认不填 与notepad 该属性与codeStyle='layuiCodexw'搭配使用
                , buttonColor: '#FFB800' // 自定义按钮颜色
                , hoverBgColor: 'red'    // 自定义鼠标悬浮背景颜色
                , hoverColor: '#000000'  // 自定义鼠标悬浮按钮颜色
            });
            //upload 接口要求返回的数据格式
            // 				{
            // 					code:0   ,//code=0代表文件保存成功 其他code值 则认为失败
            // 					msg:'图片保存失败' ,//搭配code使用 当code不等于 0 时,做出提示信息
            // 					url:'http://xxx.com/images/xxx.jpg' //图片上传成功后,图片的访问路径/保存路径,使用图片全路径
            // 				}
            // 监听提交
            layui.form.on('submit(layuiadmin-app-form-submit)', function (data) {
                data.field.content = $("#L_content").val();
                let result = Ajax.post(path + "/admin/adminHelp/insert", data.field);
                let index = parent.layer.getFrameIndex(window.name);
                parent.layer.close(index);
                parent.layer.msg(result.msg);
                //重载表格
                parent.xijiaRenderTable();
            });
        });
    });

    $(function () {
        // select 字典数据
        $("#category").html(Dict.getDictSelect(Enums.Admin.HelpCategory));        // 是否跳转  不带默认值
        $("#helpVersion").html(Dict.getDictSelect(Enums.Admin.HelpVersion));      // 位置
        // $("#isSkip").html(Dict.getDictSelect(Enums.Admin.BannerIsSkip,-1,"默认值"));  //带默认值
    })
</script>
</body>
</html>
